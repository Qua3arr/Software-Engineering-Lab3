Реализация отмены нескольких команд:
В системе отмена реализована через стек истории команд. Каждая выполненная команда сохраняется в стеке CommandHistory. Для отмены нескольких последних команд нужно последовательно вызывать метод Undo() — каждый вызов отменяет одну команду из стека. Отмененные команды перемещаются в отдельный стек для возможного повтора через Redo().

Основные ограничения системы:
1. Безопасность отмены — не все команды можно безопасно отменить (например, если лифт движется или двери заблокированы).
2. Память — история хранит все команды без ограничения глубины, что может привести к утечке памяти.
3. Частичная отмена — нельзя отменить одну команду из середины истории, только последовательно с конца.
4. Зависимости команд — система не учитывает логические связи между командами (например, если отменить открытие дверей, но оставить их закрытие в истории).
5. Сложные операции — нет поддержки отмены групповых операций (макрокоманд).
6. Сериализация — история не сохраняется между перезапусками программы.
7. Многопоточность — система не защищена от конкурентного доступа к истории команд.