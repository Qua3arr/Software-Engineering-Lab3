Для добавления новых типов расчетов (например, скидок) потребуются следующие изменения:

1. Создать новый класс посетителя DiscountCalculator, унаследованный от Visitor, с реализацией методов VisitProduct() и VisitBox().
2. Внести изменения в класс Order (опционально):
   * Добавить метод ApplyDiscounts() или расширить PrintOrderSummary()
   * Или просто использовать нового посетителя напрямую в клиентском коде

Пример минимальных изменений:
public class DiscountCalculator : Visitor
{
    public override void VisitProduct(Product product) 
    {
        // Логика расчета скидок для продуктов
    }
    
    public override void VisitBox(Box box) 
    {
        // Логика расчета скидок для коробок
    }
}

Преимущества подхода:
1. Не нужно изменять существующие классы Product и Box
2. Все алгоритмы расчета изолированы в отдельных классах
3. Легко добавлять новые типы расчетов без риска сломать существующий код
4. Посетители можно комбинировать и использовать независимо