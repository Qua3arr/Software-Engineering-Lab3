Обеспечение корректности переходов:
Логика переходов инкапсулирована в каждом конкретном состоянии. Например, в классе DeliveredOrderState метод ProcessOrder() не меняет состояние, а только выводит сообщение, что заказ уже доставлен. Это предотвращает некорректные переходы.

Добавленные методы для управления состояниями:
1. ProcessOrder(Order order) — основной метод перехода к следующему состоянию.
2. CancelOrder(Order order) — метод отмены заказа (реализован с проверками допустимости отмены).
3. GetStatus() — возвращает строковое представление текущего состояния.
4. В классе Order добавлен SetState(OrderState state) для смены состояния (вызывается из классов состояний).

Защита от некорректных переходов:
1. Каждый класс состояния сам определяет, в какое состояние можно перейти.
2. В конечных состояниях (DeliveredOrderState, CancelledOrderState) метод ProcessOrder() не выполняет переход.
3. Метод CancelOrder() содержит проверки (например, нельзя отменить доставленный заказ).